# üöÄ CI/CD –ù–∞—Å—Ç—Ä–æ–π–∫–∞

## ‚úÖ –ß—Ç–æ —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ:

### 1. **CI (Continuous Integration)** - `.github/workflows/ci.yml`

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏:

- –°–æ–∑–¥–∞–Ω–∏–∏ Pull Request –≤ `main`/`master`
- Push –≤ `main`/`master`

**–ü—Ä–æ–≤–µ—Ä–∫–∏:**

- ‚úÖ **Lint & Format** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∏–ª—è –∫–æ–¥–∞ (Prettier + ESLint)
- ‚úÖ **Build** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –∫–æ–¥ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è
- ‚úÖ **Tests** - –∑–∞–ø—É—Å–∫ unit-—Ç–µ—Å—Ç–æ–≤
- ‚úÖ **Commitlint** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ –∫–æ–º–º–∏—Ç–æ–≤ (Conventional Commits)

### 2. **CD (Continuous Deployment)** - `.github/workflows/cd.yml`

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏:

- Push –≤ `main`/`master` (–ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ CI)

**–î–µ–π—Å—Ç–≤–∏—è:**

- üî® –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
- üöÄ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –Ω–∞ Render (staging)

---

## üìù –§–æ—Ä–º–∞—Ç –∫–æ–º–º–∏—Ç–æ–≤ (Conventional Commits)

–ò—Å–ø–æ–ª—å–∑—É–π —Å–ª–µ–¥—É—é—â–∏–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è –∫–æ–º–º–∏—Ç–æ–≤:

```
<type>(<scope>): <subject>

<body>

<footer>
```

### –¢–∏–ø—ã –∫–æ–º–º–∏—Ç–æ–≤:

- `feat`: –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- `fix`: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–∞
- `docs`: –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- `style`: —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ (–Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –ª–æ–≥–∏–∫—É)
- `refactor`: —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∫–æ–¥–∞
- `test`: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ/–∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤
- `chore`: –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, –∫–æ–Ω—Ñ–∏–≥–æ–≤ –∏ —Ç.–¥.

### –ü—Ä–∏–º–µ—Ä—ã:

```bash
feat(auth): add JWT token refresh endpoint

fix(prisma): resolve database connection issue

docs(readme): update installation instructions

test(auth): add unit tests for login service

chore(deps): update nestjs to v11
```

---

## üîß –õ–æ–∫–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º

### –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ª–æ–∫–∞–ª—å–Ω–æ:

```bash
pnpm validate
```

–≠—Ç–æ –≤—ã–ø–æ–ª–Ω–∏—Ç:

1. –ü—Ä–æ–≤–µ—Ä–∫—É —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
2. –õ–∏–Ω—Ç–∏–Ω–≥
3. –°–±–æ—Ä–∫—É
4. –¢–µ—Å—Ç—ã

### –û—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
pnpm format:check

# –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
pnpm format

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –ª–∏–Ω—Ç–µ—Ä
pnpm lint

# –°–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
pnpm build

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã
pnpm test
```

---

## üîë –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Secrets –¥–ª—è CD

### –î–ª—è Render:

1. **–ü–æ–ª—É—á–∏ Render API Key:**
   - –ó–∞–π–¥–∏ –≤ Render Dashboard
   - Account Settings ‚Üí API Keys
   - –°–æ–∑–¥–∞–π –Ω–æ–≤—ã–π –∫–ª—é—á

2. **–ü–æ–ª—É—á–∏ Service ID:**
   - –û—Ç–∫—Ä–æ–π —Å–≤–æ–π —Å–µ—Ä–≤–∏—Å –≤ Render
   - –°–∫–æ–ø–∏—Ä—É–π ID –∏–∑ URL –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫

3. **–î–æ–±–∞–≤—å Secrets –≤ GitHub:**
   - Settings ‚Üí Secrets and variables ‚Üí Actions
   - –î–æ–±–∞–≤—å:
     - `RENDER_API_KEY` - —Ç–≤–æ–π API –∫–ª—é—á
     - `RENDER_SERVICE_ID` - ID —Ç–≤–æ–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞

---

## üõ°Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Branch Protection

–°–ª–µ–¥—É–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –≤ `.github/BRANCH_PROTECTION.md`

**–ö—Ä–∞—Ç–∫–æ:**

1. Settings ‚Üí Branches ‚Üí Add rule
2. Branch name: `main` –∏–ª–∏ `master`
3. –í–∫–ª—é—á–∏:
   - Require pull request before merging
   - Require status checks to pass
   - –í—ã–±–µ—Ä–∏ –≤—Å–µ CI jobs –≤ —Å–ø–∏—Å–∫–µ

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ CI/CD

### –¢–µ—Å—Ç CI:

1. –°–æ–∑–¥–∞–π –Ω–æ–≤—É—é –≤–µ—Ç–∫—É:

   ```bash
   git checkout -b test/ci-check
   ```

2. –°–¥–µ–ª–∞–π –Ω–µ–±–æ–ª—å—à–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–æ–±–∞–≤—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π)

3. –ó–∞–∫–æ–º–º–∏—Ç—å —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º:

   ```bash
   git commit -m "test(ci): verify CI workflow"
   ```

4. –ó–∞–ø—É—à—å –∏ —Å–æ–∑–¥–∞–π PR:

   ```bash
   git push origin test/ci-check
   ```

5. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –≤—Å–µ CI –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ—à–ª–∏ ‚úÖ

### –¢–µ—Å—Ç CD:

1. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –º–µ—Ä–¥–∂–∞ PR –≤ `main`
2. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ CD workflow –∑–∞–ø—É—Å—Ç–∏–ª—Å—è
3. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –¥–µ–ø–ª–æ–π –Ω–∞ Render –≤—ã–ø–æ–ª–Ω–∏–ª—Å—è
4. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Å–µ—Ä–≤–∏—Å –¥–æ—Å—Ç—É–ø–µ–Ω

---

## ‚ùì Troubleshooting

### CI –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è?

- –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Ñ–∞–π–ª—ã –≤ `.github/workflows/` –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã
- –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –≤–µ—Ç–∫–∞ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è `main` –∏–ª–∏ `master` –≤ workflow

### CD –Ω–µ –¥–µ–ø–ª–æ–∏—Ç?

- –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ Secrets –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ –≤ GitHub Actions
- –£–±–µ–¥–∏—Å—å —á—Ç–æ Render API Key –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞ –Ω–∞ –¥–µ–ø–ª–æ–π

### Commitlint —Ä—É–≥–∞–µ—Ç—Å—è?

- –ò—Å–ø–æ–ª—å–∑—É–π –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∫–æ–º–º–∏—Ç–æ–≤ (—Å–º. –≤—ã—à–µ)
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π `git commit --no-verify` (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

---

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [GitHub Actions Docs](https://docs.github.com/en/actions)
- [Conventional Commits](https://www.conventionalcommits.org/)
- [Render API Docs](https://render.com/docs/api)
